!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";const e=window.__SWETRIX_CAPTCHA_DEV||!1,t=["en","de","fr","pl","uk"],r="en",n=e?"./light.html":"https://cdn.swetrixcaptcha.com/pages/light",a=e?"./dark.html":"https://cdn.swetrixcaptcha.com/pages/dark",i=["light","dark","auto"],o=/^(?!.*--)[a-zA-Z0-9-]{12}$/;var c;!function(e){e.log="log",e.error="error",e.warn="warn",e.info="info"}(c||(c={}));const s=["AP00000000000","FAIL000000000"],d=[],u=(e,t)=>{console[e](`[Swetrix Captcha] ${t}`)},l=e=>{const n=e.toLowerCase().split("-")[0].split("_")[0];return(e=>t.includes(e))(n)?n:r},p=e=>{const t=e.getAttribute("data-lang");if(console.log("forcedLang",t),t)return l(t);const n=(e=>{let t=e;for(;t;){const e=t.getAttribute("lang");if(e)return e;t=t.parentElement}return null})(e.parentElement);return n?l(n):(()=>{if("undefined"==typeof navigator)return r;const e=navigator.languages||[navigator.language];for(const t of e){const e=l(t);if(e!==r||t.toLowerCase().startsWith("en"))return e}return r})()},m=e=>e&&"auto"!==e?e:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",f=(e,t)=>`${e}?${Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}`,h=(e,t)=>{(e=>{e.querySelectorAll('iframe[id^="swetrix-captcha-"]').forEach(t=>{const r=t.id.replace("-frame",""),n=e.querySelector(`input[id="${r}"]`);n&&n.remove();const a=d.indexOf(r);a>-1&&d.splice(a,1),t.remove()})})(e);const r={...t,cid:w()},n=v(r),a=A(r);e.appendChild(n),e.appendChild(a)},w=()=>{const e="swetrix-captcha-"+Math.random().toString(36).substr(2,6);return d.includes(e)?w():(d.push(e),e)},g=e=>{const{data:t}=e;if(!t)return;const{type:r,cid:n,event:a}=t;if("swetrix-captcha"!==r)return;if(!n||!d.includes(n))return;const i=document.getElementById(n),o=null!==i;switch(a){case"success":{const{token:e}=t;if(!o)return void u(c.error,"[PM -> success] Input element does not exist.");i.value=e;break}case"failure":case"tokenExpired":if(!o)return void u(c.error,"[PM -> failure] Input element does not exist.");i.value=""}},v=e=>{const{theme:t}=e,r=m(t),i=document.createElement("iframe");return i.id=`${e.cid}-frame`,i.src=f("dark"===r?a:n,e),i.style.height="66px",i.title="Swetrix Captcha - Human verification",i.style.border="none",i.style.width="302px",i.style.overflow="visible",i.setAttribute("role","presentation"),i.setAttribute("aria-label","Human verification widget"),i},A=e=>{const{cid:t}=e,r=document.createElement("input");return r.type="hidden",r.name=e.respName,r.value="",r.id=t,r.setAttribute("aria-hidden","true"),r},b=e=>{const{theme:t,pid:r}=e;return t&&!i.includes(t)?(u(c.error,`Invalid data-theme parameter: ${t}. Valid options are: ${i.join(", ")}`),!1):!(!r||!(e=>s.includes(e)||o.test(e))(r))||(u(c.error,`Invalid data-project-id parameter: ${r}`),!1)},y=e=>{const t={pid:e.getAttribute("data-project-id"),respName:e.getAttribute("data-response-input-name")||"swetrix-captcha-response",theme:e.getAttribute("data-theme")||"auto",lang:p(e)},r=e.getAttribute("data-api-url");return r&&(t.apiUrl=r),t},x=(e=!1)=>{!e&&"swecaptcha"in window&&u(c.warn,"Captcha is already loaded."),window.swecaptcha=!0,window.addEventListener("message",g);const t=Array.from(document.querySelectorAll(".swecaptcha"));for(const e of t){const t=y(e);if(!b(t))return void u(c.error,"Aborting captcha rendering due to invalid parameters.");h(e,t)}};window.swetrixCaptchaForceLoad=()=>x(!0),document.addEventListener("DOMContentLoaded",()=>x())});
//# sourceMappingURL=captcha-loader.js.map
