!function(){"use strict";async function e(e){const t=(new TextEncoder).encode(e),s=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(s)).map(e=>e.toString(16).padStart(2,"0")).join("")}function t(e,t){for(let s=0;s<t;s++)if("0"!==e[s])return!1;return!0}self.onmessage=async s=>{if(!s.data){const e={type:"error",message:"Invalid message: event.data is missing or empty"};return void self.postMessage(e)}const{challenge:n,difficulty:a,maxIterations:r}=s.data;if("string"!=typeof n||0===n.length){const e={type:"error",message:"Invalid message: challenge must be a non-empty string"};return void self.postMessage(e)}if("number"!=typeof a||!Number.isInteger(a)){const e={type:"error",message:"Invalid message: difficulty must be an integer"};return void self.postMessage(e)}if(a<1||a>32){const e={type:"error",message:"Invalid message: difficulty must be between 1 and 32"};return void self.postMessage(e)}const o=null!=r?r:1e8;if("number"!=typeof o||!Number.isInteger(o)){const e={type:"error",message:"Invalid message: maxIterations must be an integer"};return void self.postMessage(e)}if(o<1){const e={type:"error",message:"Invalid message: maxIterations must be at least 1"};return void self.postMessage(e)}await async function(s,n,a){let r=0;const o=Date.now();for(;r<a;){const a=`${s}:${r}`,i=await e(a);if(t(i,n)){const e={type:"result",nonce:r,solution:i};return void self.postMessage(e)}if(r++,r%1e4==0){const e=(Date.now()-o)/1e3,t={type:"progress",attempts:r,hashRate:Math.round(r/e)};self.postMessage(t)}}const i=Date.now()-o,g=i/1e3,f=g>0?Math.round(r/g):0,m={type:"timeout",reason:`Maximum iterations reached (${a.toLocaleString()})`,attempts:r,elapsedMs:i,hashRate:f};self.postMessage(m)}(n,a,o)}}();
//# sourceMappingURL=pow-worker.js.map
