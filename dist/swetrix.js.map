{"version":3,"file":"swetrix.js","sources":["../src/utils.ts","../src/Lib.ts","../src/index.ts"],"sourcesContent":[null,null,null],"names":["findInSearch","exp","res","location","search","match","undefined","utmSourceRegex","utmCampaignRegex","utmMediumRegex","utmTermRegex","utmContentRegex","gclidRegex","isInBrowser","window","getLocale","navigator","languages","language","getTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","e","getReferrer","document","referrer","getUTMSource","getUTMMedium","getUTMCampaign","getUTMTerm","getUTMContent","getPath","options","result","pathname","hash","hashIndex","indexOf","substring","defaultActions","stop","DEFAULT_CACHE_DURATION","Lib","constructor","projectID","this","pageData","pageViewsOptions","errorsOptions","perfStatsCollected","activePage","errorListenerExists","cachedData","trackPathChange","bind","heartbeat","captureError","event","_a","sampleRate","Math","random","submitError","filename","lineno","colno","name","_b","error","message","_c","stackTrace","_d","stack","trackErrors","canTrack","addEventListener","removeEventListener","payload","evokeCallback","privateData","pid","errorPayload","pg","lc","tz","callback","callbackResult","Object","assign","sendRequest","track","data","ref","so","me","ca","te","co","profileId","trackPageViews","actions","interval","unique","setInterval","setTimeout","hbInterval","path","clearInterval","trackPage","getPerformanceStats","performance","getEntriesByType","perf","dns","domainLookupEnd","domainLookupStart","tls","secureConnectionStart","requestStart","conn","connectStart","connectEnd","response","responseEnd","responseStart","render","domComplete","domContentLoadedEventEnd","dom_load","page_load","loadEventStart","ttfb","getFeatureFlags","forceRefresh","requestedProfileId","now","Date","timestamp","flags","fetchFlagsAndExperiments","console","warn","apiBase","getApiBase","body","fetch","method","headers","JSON","stringify","ok","status","json","cachedProfileId","experiments","getFeatureFlag","key","defaultValue","clearFeatureFlagsCache","getExperiments","getExperiment","experimentId","defaultVariant","clearExperimentsCache","getProfileId","getSessionId","sessionId","apiURL","replace","heartbeatOnBackground","visibilityState","newPath","submitPageView","pvPayload","disabled","respectDNT","doNotTrack","devMode","hostname","webdriver","host","LIB_INSTANCE","async","Boolean","_prev","Promise","resolve","readyState"],"mappings":"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"}