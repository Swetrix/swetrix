!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";const e=window.__SWETRIX_CAPTCHA_DEV||!1,t=e?"./light.html":"https://cap.swetrix.com/pages/light",n=e?"./dark.html":"https://cap.swetrix.com/pages/dark",r=["light","dark"],a=/^(?!.*--)[a-zA-Z0-9-]{12}$/;var i;!function(e){e.log="log",e.error="error",e.warn="warn",e.info="info"}(i||(i={}));const o=["AP00000000000","FAIL000000000"],c=[],d=(e,t)=>{console[e](`[Swetrix Captcha] ${t}`)},s=(e,t)=>`${e}?${Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}`,p=(e,t)=>{const n={...t,cid:u()},r=m(n),a=h(n);e.appendChild(r),e.appendChild(a)},u=()=>{const e="swetrix-captcha-"+Math.random().toString(36).substr(2,6);return c.includes(e)?u():(c.push(e),e)},l=e=>{const{data:t}=e;if(!t)return;const{type:n,cid:r,event:a}=t;if("swetrix-captcha"!==n)return;if(!r||!c.includes(r))return;const o=document.getElementById(r),s=null!==o;switch(a){case"success":{const{token:e}=t;if(!s)return void d(i.error,"[PM -> success] Input element does not exist.");o.value=e;break}case"failure":case"tokenExpired":if(!s)return void d(i.error,"[PM -> failure] Input element does not exist.");o.value=""}},m=e=>{const{theme:r}=e,a=document.createElement("iframe");return a.id=`${e.cid}-frame`,a.src=s("dark"===r?n:t,e),a.style.height="66px",a.title="Swetrix Captcha",a.style.border="none",a.style.width="302px",a.style.overflow="visible",a},h=e=>{const{cid:t}=e,n=document.createElement("input");return n.type="hidden",n.name=e.respName,n.value="",n.id=t,n},w=e=>{const{theme:t,pid:n}=e;return t&&!r.includes(t)?(d(i.error,`Invalid data-theme parameter: ${t}`),!1):!(!n||!(e=>o.includes(e)||a.test(e))(n))||(d(i.error,`Invalid data-project-id parameter: ${n}`),!1)},f=e=>({pid:e.getAttribute("data-project-id"),respName:e.getAttribute("data-response-input-name")||"swetrix-captcha-response",theme:e.getAttribute("data-theme")}),g=(e=!1)=>{!e&&"swecaptcha"in window&&d(i.warn,"Captcha is already loaded."),window.swecaptcha=!0,window.addEventListener("message",l);const t=Array.from(document.querySelectorAll(".swecaptcha"));for(const e of t){const t=f(e);if(!w(t))return void d(i.error,"Aborting captcha rendering due to invalid parameters.");p(e,t)}};window.swetrixCaptchaForceLoad=()=>g(!0),document.addEventListener("DOMContentLoaded",()=>g())});
//# sourceMappingURL=captcha-loader.js.map
