!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";const e=window.__SWETRIX_CAPTCHA_DEV||!1,t=e?"./light.html":"https://cdn.swetrixcaptcha.com/pages/light",r=e?"./dark.html":"https://cdn.swetrixcaptcha.com/pages/dark",n=["light","dark","auto"],a=/^(?!.*--)[a-zA-Z0-9-]{12}$/;var i;!function(e){e.log="log",e.error="error",e.warn="warn",e.info="info"}(i||(i={}));const o=["AP00000000000","FAIL000000000"],d=[],c=(e,t)=>{console[e](`[Swetrix Captcha] ${t}`)},s=e=>e&&"auto"!==e?e:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light",u=(e,t)=>`${e}?${Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}`,p=(e,t)=>{const r={...t,cid:l()},n=h(r),a=w(r);e.appendChild(n),e.appendChild(a)},l=()=>{const e="swetrix-captcha-"+Math.random().toString(36).substr(2,6);return d.includes(e)?l():(d.push(e),e)},m=e=>{const{data:t}=e;if(!t)return;const{type:r,cid:n,event:a}=t;if("swetrix-captcha"!==r)return;if(!n||!d.includes(n))return;const o=document.getElementById(n),s=null!==o;switch(a){case"success":{const{token:e}=t;if(!s)return void c(i.error,"[PM -> success] Input element does not exist.");o.value=e;break}case"failure":case"tokenExpired":if(!s)return void c(i.error,"[PM -> failure] Input element does not exist.");o.value=""}},h=e=>{const{theme:n}=e,a=s(n),i=document.createElement("iframe");return i.id=`${e.cid}-frame`,i.src=u("dark"===a?r:t,e),i.style.height="66px",i.title="Swetrix Captcha - Human verification",i.style.border="none",i.style.width="302px",i.style.overflow="visible",i.setAttribute("role","presentation"),i.setAttribute("aria-label","Human verification widget"),i},w=e=>{const{cid:t}=e,r=document.createElement("input");return r.type="hidden",r.name=e.respName,r.value="",r.id=t,r.setAttribute("aria-hidden","true"),r},f=e=>{const{theme:t,pid:r}=e;return t&&!n.includes(t)?(c(i.error,`Invalid data-theme parameter: ${t}. Valid options are: ${n.join(", ")}`),!1):!(!r||!(e=>o.includes(e)||a.test(e))(r))||(c(i.error,`Invalid data-project-id parameter: ${r}`),!1)},g=e=>{const t={pid:e.getAttribute("data-project-id"),respName:e.getAttribute("data-response-input-name")||"swetrix-captcha-response",theme:e.getAttribute("data-theme")||"auto"},r=e.getAttribute("data-api-url");return r&&(t.apiUrl=r),t},v=(e=!1)=>{!e&&"swecaptcha"in window&&c(i.warn,"Captcha is already loaded."),window.swecaptcha=!0,window.addEventListener("message",m);const t=Array.from(document.querySelectorAll(".swecaptcha"));for(const e of t){const t=g(e);if(!f(t))return void c(i.error,"Aborting captcha rendering due to invalid parameters.");p(e,t)}};window.swetrixCaptchaForceLoad=()=>v(!0),document.addEventListener("DOMContentLoaded",()=>v())});
//# sourceMappingURL=captcha-loader.js.map
