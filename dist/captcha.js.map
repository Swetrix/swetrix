{"version":3,"file":"captcha.js","sources":["../src/captcha.ts"],"sourcesContent":[null],"names":["isDevelopment","window","__SWETRIX_CAPTCHA_DEV","DEFAULT_API_URL","API_URL","__SWETRIX_API_URL","WORKER_URL","MAX_ITERATIONS","TIMEOUT_MS","ENDPOINTS","IFRAME_MESSAGE_TYPES","ACTION","activeAction","checkbox","powWorker","sendMessageToLoader","event","data","parent","postMessage","type","cid","__SWETRIX_CAPTCHA_ID","updateProgressBar","progress","progressBarContainer","document","querySelector","progressBar","classList","add","style","width","setAttribute","removeAttribute","remove","setTimeout","Math","min","String","round","updateAriaState","action","captchaComponent","loading","completed","failure","srStatus","textContent","activateAction","statusDefault","statusFailure","statusComputing","actions","_a","_b","_c","_d","_e","requestAnimationFrame","setLifetimeTimeout","TOKEN_EXPIRED","CAPTCHA_TOKEN_LIFETIME","verifySolution","async","challenge","nonce","solution","response","fetch","method","headers","body","JSON","stringify","pid","__SWETRIX_PROJECT_ID","ok","Error","json","success","token","e","FAILURE","calculateProgress","attempts","difficulty","rawProgress","pow","sqrt","solveInMainThread","challengeStr","startTime","Date","now","sha256","message","TextEncoder","encode","hashBuffer","crypto","subtle","digest","Array","from","Uint8Array","map","b","toString","padStart","join","hasValidPrefix","hash","diff","i","console","error","input","SUCCESS","handleCaptchaActivation","generateChallenge","Promise","resolve","reject","terminate","Worker","then","catch","onmessage","reason","errorData","warn","onerror","solveChallenge","addEventListener","branding","stopPropagation","keyboardEvent","key","preventDefault"],"mappings":"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"}